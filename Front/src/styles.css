@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-slate-100 transition-colors duration-300;
  }
}

@layer utilities {
  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .glass-card {
    background: rgba(15, 23, 42, 0.6);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.08);
  }

  .text-gradient-purple {
    background: linear-gradient(to right, #c084fc, #a855f7, #6366f1);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
  }

  /* Glowing Embers Animation */
  @keyframes rise-ember {
    0% {
      transform: translateY(0) scale(1);
      opacity: 0;
    }
    20% {
      opacity: 1;
    }
    100% {
      transform: translateY(-250px) scale(0) translateX(var(--drift, 10px));
      opacity: 0;
    }
  }

  .ember-particle {
    position: absolute;
    bottom: -10px;
    border-radius: 50%;
    background: #fbbf24;
    box-shadow: 0 0 15px 4px rgba(220, 38, 38, 0.6);
    opacity: 0; /* Base opacity is 0 */
    animation: rise-ember linear infinite;
    /* Always running, visibility controlled by parent opacity or internal keyframes if parent is visible */
  }

  /* Global Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  ::-webkit-scrollbar-track {
    background: #21252b; /* Sidebar BG */
  }
  ::-webkit-scrollbar-corner {
    background: #21252b;
  }
  ::-webkit-scrollbar-thumb {
    background: #4b5363; /* Slate-600 approx */
    border: 2px solid #21252b; /* Border matches track for padding effect */
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: #6b7280; /* Slate-500 approx */
  }

  /* Syntax Highlighting Colors */
  .token-keyword { color: #c678dd; } /* Purple */
  .token-function { color: #61afef; } /* Blue */
  .token-string { color: #98c379; } /* Green */
  .token-number { color: #d19a66; } /* Orange */
  .token-comment { color: #5c6370; font-style: italic; } /* Grey */
  .token-variable { color: #e06c75; } /* Red */
  .token-type { color: #e5c07b; } /* Yellow */
  .token-operator { color: #56b6c2; } /* Cyan */

  @keyframes space-drift {
    0% {
      background-position: 0% 50%;
      transform: scale(1.0);
    }
    50% {
      background-position: 100% 50%;
      transform: scale(1.25);
    }
    100% {
      background-position: 0% 50%;
      transform: scale(1.0);
    }
  }

  .editor-background-animate {
    animation: space-drift 45s ease-in-out infinite;
  }

  @keyframes spin-zoom {
    0% {
      transform: scale(0.4) rotate(0deg);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    100% {
      transform: scale(4) rotate(180deg);
      opacity: 0;
    }
  }

  .animate-spin-zoom {
    animation: spin-zoom 2.5s ease-in-out forwards;
  }

  /* Gamified Syntax Highlighting Animations */
  /* Animations removed to prevent flickering on innerHTML updates. 
     Future Todo: Implement particle system for typing rewards. */

  .token-keyword {
    display: inline-block;
    filter: drop-shadow(0 0 2px rgba(168,85,247,0.3));
  }

  .token-variable {
    display: inline-block;
    color: #f87171; /* red-400 */
  }

  .token-function {
    display: inline-block;
    color: #60a5fa; /* blue-400 */
  }

  .token-string {
    display: inline-block;
    transition: all 0.2s;
  }
  .token-string:hover {
    transform: scale(1.05);
    text-shadow: 0 0 8px rgba(74, 222, 128, 0.5); /* green-400 glow */
  }

  .token-number {
    display: inline-block;
    font-weight: bold;
    color: #fbbf24; /* amber-400 */
  }

  @keyframes loading {
    0% { transform: translateX(-100%); }
    50% { transform: translateX(0); }
    100% { transform: translateX(100%); }
  }
}