<div
    class="min-h-screen bg-slate-900 text-white selection:bg-purple-500 selection:text-white font-jersey tracking-wider relative overflow-hidden flex items-center justify-center p-4">

    <!-- Canvas Background (Image Sequence) -->
    <!-- Source Videos (Hidden) -->
    <video #sourceVideo src="/registro/intro.mp4" muted playsinline preload="auto" class="hidden"></video>
    <video #sourceVideo2 src="/registro/intro.mp4" muted playsinline preload="auto" class="hidden"></video>

    <!-- Canvas Background (Render Target) -->
    <div class="absolute inset-0 z-0 overflow-hidden flex items-center justify-center">
        <canvas #bgCanvas class="absolute inset-0 w-full h-full object-cover">
        </canvas>
        <!-- Dark Overlay to reduce saturation -->
        <div class="absolute inset-0 bg-slate-950/60 mix-blend-multiply"></div>

        <div
            class="absolute bottom-0 right-0 w-full h-48 bg-gradient-to-t from-slate-950 via-slate-900/50 to-transparent pointer-events-none mix-blend-multiply">
        </div>
        <div
            class="absolute bottom-0 right-0 w-64 h-64 bg-slate-900/80 blur-3xl pointer-events-none mix-blend-multiply">
        </div>
    </div>

    <nav class="absolute top-6 left-6 z-20">
        <a routerLink="/" class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors group">
            <div class="p-2 rounded-lg bg-slate-800/50 border border-slate-700 group-hover:bg-slate-700 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m15 18-6-6 6-6" />
                </svg>
            </div>
            <span class="font-medium text-xl">Volver al inicio</span>
        </a>
    </nav>

    <main class="relative z-10 w-full max-w-xl">
        <div
            class="bg-slate-900/20 backdrop-blur-xl border border-white/10 rounded-3xl p-8 md:p-12 shadow-2xl animate-fade-in-up group/card transition-all duration-500 ease-out focus-within:border-purple-500/50 focus-within:shadow-[0_0_50px_rgba(168,85,247,0.2)] focus-within:bg-slate-900/40 focus-within:scale-[1.01]">
            <div
                class="text-center mb-10 transform transition-transform duration-500 group-focus-within/card:translate-y-[-5px]">
                <h1 class="text-5xl md:text-6xl font-black mb-4 tracking-wide drop-shadow-md">
                    Bienvenido a <span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 animate-pulse">Codeo</span>
                </h1>
                <p class="text-slate-300 text-2xl">Continúa tu viaje de programación.</p>
            </div>

            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="space-y-6">

                <div class="space-y-2">
                    <label for="email" class="text-xl text-slate-200 ml-1">Correo electrónico</label>
                    <div class="relative group">
                        <div
                            class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-500 group-focus-within:text-purple-400 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect width="20" height="16" x="2" y="4" rx="2" />
                                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" />
                            </svg>
                        </div>
                        <input type="email" id="email" formControlName="email" placeholder="tu@email.com" required
                            class="w-full bg-slate-950/50 border border-slate-700 text-slate-100 placeholder:text-slate-600 text-xl rounded-xl py-4 pl-12 pr-4 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500/50 transition-all
                            {{ loginForm.get('email')?.invalid && loginForm.get('email')?.touched ? 'border-red-500 focus:border-red-500 focus:ring-red-500/50' : '' }}">
                    </div>
                    @if(loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
                    <div class="text-red-400 text-sm ml-1 mt-1 animate-fade-in">
                        @if(loginForm.get('email')?.hasError('required')) { El email es obligatorio. }
                        @if(loginForm.get('email')?.hasError('email')) { Introduce un email válido. }
                        @if(loginForm.get('email')?.hasError('serverError')) { {{
                        loginForm.get('email')?.getError('serverError') }} }
                    </div>
                    }
                </div>

                <div class="space-y-2">
                    <label for="password" class="text-xl text-slate-200 ml-1">Contraseña</label>
                    <div class="relative group">
                        <div
                            class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-500 group-focus-within:text-purple-400 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect width="18" height="11" x="3" y="11" rx="2" ry="2" />
                                <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                            </svg>
                        </div>
                        <input type="password" id="password" formControlName="password" placeholder="••••••••" required
                            class="w-full bg-slate-950/50 border border-slate-700 text-slate-100 placeholder:text-slate-600 text-xl rounded-xl py-4 pl-12 pr-4 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500/50 transition-all
                            {{ loginForm.get('password')?.invalid && loginForm.get('password')?.touched ? 'border-red-500 focus:border-red-500 focus:ring-red-500/50' : '' }}">
                    </div>
                    @if(loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
                    <div class="text-red-400 text-sm ml-1 mt-1 animate-fade-in">
                        @if(loginForm.get('password')?.hasError('required')) { La contraseña es obligatoria. }
                        @if(loginForm.get('password')?.hasError('serverError')) { {{
                        loginForm.get('password')?.getError('serverError') }} }
                    </div>
                    }
                </div>

                @if (errorMessage()) {
                <div
                    class="bg-red-500/10 border border-red-500/50 rounded-xl p-4 text-center mt-4 mb-4 animate-fade-in">
                    <p class="text-red-200 text-sm font-medium">{{ errorMessage() }}</p>
                </div>
                }

                <div class="pt-6">
                    <button type="submit"
                        class="w-full group relative px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-bold text-xl tracking-wide hover:shadow-lg hover:shadow-purple-500/40 transition-all duration-300 transform hover:-translate-y-1 text-center overflow-hidden">
                        <div
                            class="absolute inset-0 bg-white/20 group-hover:translate-x-full transition-transform duration-700 ease-out -skew-x-12 origin-left -translate-x-full">
                        </div>
                        <span class="relative z-10 flex items-center justify-center gap-2">
                            <span>Iniciar Sesión</span>
                            <svg class="w-6 h-6 group-hover:translate-x-1 transition-transform" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1">
                                </path>
                            </svg>
                        </span>
                    </button>
                </div>

                <div class="text-center mt-8">
                    <p class="text-xl text-slate-400">¿No tienes cuenta? <a routerLink="/registro"
                            class="text-purple-400 hover:text-purple-300 transition-colors underline decoration-purple-500/30 hover:decoration-purple-500">Regístrate
                            aquí</a></p>
                </div>
            </form>
        </div>

        <div class="text-center mt-8">
            <p class="text-lg text-slate-500 max-w-sm mx-auto">
                <a href="#" class="hover:text-slate-400 transition-colors">¿Olvidaste tu contraseña?</a>
            </p>
        </div>
    </main>
    <!-- Loading Overlay -->
    @if (isLoading()) {
    <div class="fixed inset-0 z-50 bg-slate-950 flex flex-col items-center justify-center animate-fade-in">
        <!-- Background elements for depth -->
        <div
            class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-purple-900/20 via-slate-950 to-slate-950">
        </div>

        <!-- Content -->
        <div class="relative z-10 flex flex-col items-center gap-8">
            <!-- Logo Animation -->
            <div class="relative">
                <div class="absolute inset-0 bg-purple-500 blur-2xl opacity-20 animate-pulse"></div>
                <h1
                    class="text-6xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-br from-white via-purple-100 to-purple-400 drop-shadow-[0_0_15px_rgba(168,85,247,0.5)]">
                    CODEO
                </h1>
            </div>

            <!-- Loading Spinner/Bar -->
            <div class="flex flex-col items-center gap-3">
                <div class="w-64 h-1.5 bg-slate-800 rounded-full overflow-hidden border border-slate-700">
                    <div
                        class="h-full bg-gradient-to-r from-purple-600 to-pink-500 w-2/3 animate-[loading_1.5s_ease-in-out_infinite]">
                    </div>
                </div>
                <p class="text-slate-400 text-sm font-medium animate-pulse">Autenticando...</p>
            </div>
        </div>
    </div>
    }
</div>